from django.shortcuts import render

# Create your views here.

from django.db.models import Q
from django.shortcuts import render_to_response
from models import jugadores

def search(request):
        #Busca un parametro llamado q y retorna una cadena vacia si este parametro no fue suministrado
        query = request.GET.get('q', '')
        # 'q' es un objeto QuerySet
        if query:
                qset = (
                #icontains: utilizado para que no se haga distincion entre mayusculas y minusculas
                Q(nombre__icontains=query) |
                Q(apellido__icontains=query) |
                Q(dni__icontains=query)
                )
                #distinct: elimina resultados duplicados
                results = jugadores.objects.filter(qset).distinct()
        else:
                results = []
        return render_to_response("jugadores/search.html", {
        "results": results,
        "query": query
})

